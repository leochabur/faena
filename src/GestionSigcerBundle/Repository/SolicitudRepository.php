<?php

namespace GestionSigcerBundle\Repository;

/**
 * SolicitudRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class SolicitudRepository extends \Doctrine\ORM\EntityRepository
{
	public function findSolicitudes(\GestionSigcerBundle\Entity\GrupoSolicitud $grupo,
									\GestionSigcerBundle\Entity\opciones\Region $zona) 
	{ 
	    return $this->createQueryBuilder('s')
	    			->join('s.zona', 'z')
	    			->join('z.region', 'r')
	    			->where('r = :zona AND s.grupo = :grupo')
	    			->setParameter('zona', $zona)
	    			->setParameter('grupo', $grupo)
			        ->addOrderBy('s.zona')
			        ->getQuery()
			        ->getResult(); 
	} 
}
